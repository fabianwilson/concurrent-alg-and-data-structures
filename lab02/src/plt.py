import matplotlib.pyplot as plt

threads = [1, 2, 4, 8, 16]
total_ops = [100000, 200000, 400000, 800000, 1600000]

# from provided benchmark
data = {
    "0..8": {
        "10/54/36": {
            "FineSet":       [25.0696, 238.6190, 397.4900, 809.0134, 2155.0434],
            "OptimisticSet": [26.1142, 201.6113, 413.2375, 913.7874, 2194.3268],
            "LazySet":       [23.3001, 187.4903, 359.8060, 825.2384, 1939.4250],
        },
        "50/30/20": {
            "FineSet":       [32.8816, 248.8336, 544.0316, 1149.7462, 3089.9964],
            "OptimisticSet": [29.2943, 206.8890, 455.3407, 1066.1106, 2325.5119],
            "LazySet":       [27.3899, 197.3044, 411.6652, 1044.3428, 2235.2966],
        },
        "90/6/4": {
            "FineSet":       [37.6332, 237.1971, 621.2224, 1315.9742, 3585.4548],
            "OptimisticSet": [25.5982, 211.6463, 406.9689, 1053.2709, 2353.1642],
            "LazySet":       [25.7315, 199.1199, 407.6728, 1053.9464, 2354.4573],
        },
    },

    "0..1028": {
        "10/54/36": {
            "FineSet":       [424.5744, 1140.8269, 1752.3662, 5171.4952, 11473.8654],
            "OptimisticSet": [64.3724, 209.4305, 513.6790, 1248.0482, 2723.5167],
            "LazySet":       [45.0624, 206.2914, 500.0837, 1288.4900, 2716.4318],
        },
        "50/30/20": {
            "FineSet":       [1544.8203, 3112.6846, 4784.9674, 6539.6917, 14849.2210],
            "OptimisticSet": [517.0441, 622.4981, 848.6258, 1388.0498, 2862.8445],
            "LazySet":       [273.3374, 397.4215, 697.2847, 1384.5303, 2850.7132],
        },
        "90/6/4": {
            "FineSet":       [2272.3191, 4809.8278, 8011.7326, 10088.1863, 13529.7099],
            "OptimisticSet": [840.2652, 956.6932, 1132.9414, 1545.5284, 2864.3475],
            "LazySet":       [426.0067, 545.5238, 782.8946, 1392.6700, 2869.1830],
        },
    }
}


data_ = {
    "0..8": {
        "10/54/36": {
            "FineSet":       [13.0730, 61.9871, 240.5042, 530.0420, 1118.7432],
            "OptimisticSet": [12.7510, 47.3750, 118.7439, 327.6941, 811.3611],
            "LazySet":       [13.9817, 50.9460, 125.4570, 340.2109, 817.4089],
        },
        "50/30/20": {
            "FineSet":       [18.9141, 120.7908, 374.5630, 680.0430, 1430.4849],
            "OptimisticSet": [17.0420, 62.7183, 200.9541, 517.9070, 1086.7629],
            "LazySet":       [17.4443, 61.2832, 192.4990, 506.8770, 1090.7969],
        },
        "90/6/4": {
            "FineSet":       [17.0132, 123.4250, 391.3650, 696.5347, 1379.7749],
            "OptimisticSet": [15.6851, 49.1040, 218.3389, 580.4780, 1211.1692],
            "LazySet":       [16.2307, 45.2710, 186.7319, 529.8589, 1178.6680],
        },
    },

    "0..1028": {
        "10/54/36": {
            "FineSet":       [120.2441, 346.5859, 3065.3792, 6099.0879, 13582.9331],
            "OptimisticSet": [80.9128, 101.8491, 134.0090, 252.3599, 525.1970],
            "LazySet":       [56.6589, 73.5891, 113.2959, 230.6819, 503.1919],
        },
        "50/30/20": {
            "FineSet":       [424.4312, 795.2009, 7882.0959, 16166.0601, 34600.8850],
            "OptimisticSet": [294.3621, 342.1440, 337.6201, 471.2651, 900.5767],
            "LazySet":       [170.7131, 197.2661, 225.1660, 331.3579, 644.8003],
        },
        "90/6/4": {
            "FineSet":       [616.7471, 1058.5791, 9888.1570, 21637.2710, 45329.6609],
            "OptimisticSet": [460.3560, 504.2700, 537.2300, 692.4761, 1295.9121],
            "LazySet":       [247.5759, 272.9338, 299.7400, 406.1599, 786.7620],
        },
    }
}
for value_range, workloads in data.items():
    for workload, sets in workloads.items():

        plt.figure()

        for set_name, times in sets.items():
            throughput = [
                ops / (t / 1000)
                for ops, t in zip(total_ops, times)
            ]
            plt.plot(threads, throughput, marker='o', label=set_name)

        plt.xlabel("Number of Threads")
        plt.ylabel("Throughput (operations per second)")
        plt.title(f"Throughput vs Threads\nValues {value_range}, workload {workload}")
        plt.legend()
        plt.grid(True)

        plt.savefig(f"throughput_{value_range.replace('..','_')}_{workload.replace('/','_')}_benchmark.png")